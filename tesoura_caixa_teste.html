<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TESOURA - CAIXA</title>

  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    :root{
      --bg:#0b1220;
      --panel:#0f172a;
      --panel2:#0b1020;
      --border:#1f2937;
      --orange:#ff7f27;
      --white:#ffffff;
      --muted:#a3a3a3;
      --green:#22c55e;
      --red:#ef4444;
      --blue:#38bdf8;
      --btnDark:#111827;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Arial, sans-serif;background:var(--bg);color:var(--white);}
    header{
      padding:14px 18px;
      border-bottom:2px solid var(--orange);
      display:flex;align-items:center;justify-content:space-between;
      background:#07101f;
    }
    header h1{margin:0;font-size:16px;letter-spacing:.5px;color:var(--orange);text-transform:uppercase;font-weight:900;}
    .wrap{width:98vw;max-width:1600px;margin:18px auto;padding:0 10px;}
    .panel{
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px;
      box-shadow:0 6px 16px rgba(0,0,0,.35);
      margin-bottom:14px;
    }
    .panel h2{
      margin:0 0 10px 0;
      color:var(--orange);
      font-size:14px;
      text-transform:uppercase;
      letter-spacing:.5px;
      font-weight:900;
    }
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:end;}
    label{font-size:12px;font-weight:900;text-transform:uppercase;letter-spacing:.4px;color:var(--white);}
    select,input[type="date"],input[type="text"],input[type="number"]{
      height:38px;
      border-radius:10px;
      border:1px solid var(--border);
      padding:8px 10px;
      background:var(--bg);
      color:var(--white);
      font-weight:700;
      outline:none;
    }
    input[type="text"]{min-width:220px}
    .w-sm{width:140px}
    .w-md{width:180px}
    .w-lg{width:320px}
    .w-obs{width:180px}
    .btn{
      height:38px;
      border:0;
      border-radius:10px;
      padding:0 14px;
      font-weight:900;
      text-transform:uppercase;
      cursor:pointer;
    }
    .btn-blue{background:var(--blue);color:#031019;}
    .btn-orange{background:var(--orange);color:#111827;}
    .btn-dark{background:var(--btnDark);color:var(--white);border:1px solid var(--border);}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .status{margin-top:10px;font-size:12px;color:var(--muted);line-height:1.4}
    .totais{margin-top:8px;font-size:12px;color:var(--white);font-weight:900}
    .totais span{color:var(--muted);font-weight:700}
    .totais b{color:var(--white)}
    .table-wrap{overflow:visible;border-radius:12px;border:1px solid var(--border);}
    table{border-collapse:collapse;width:100%;table-layout:fixed;}
    thead th{
      position:sticky;top:0;
      background:var(--orange);
      color:#111827;
      padding:9px 8px;
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.4px;
      white-space:nowrap;
      z-index:2;
    }
    tbody td{
      background:var(--panel2);
      border-top:1px solid rgba(255,255,255,.10);
      padding:8px 8px;
      font-size:12px;
      vertical-align:middle;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    tbody tr:hover td{background:#0e1a33}
    .money-pos{color:var(--green);font-weight:900;}
    .money-neg{color:var(--red);font-weight:900;}
    .muted{color:var(--muted)}
    .pill{
      display:inline-block;
      padding:3px 8px;
      border-radius:999px;
      font-weight:900;
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.3px;
      border:1px solid rgba(255,255,255,.12);
    }
    .pill-rec{background:rgba(34,197,94,.15);color:var(--green);}
    .pill-desp{background:rgba(239,68,68,.15);color:var(--red);}
    .actions{display:flex;gap:8px}
    .linkbtn{
      border:1px solid rgba(255,255,255,.16);
      background:transparent;
      color:var(--white);
      height:28px;
      padding:0 10px;
      border-radius:10px;
      font-weight:900;
      cursor:pointer;
      text-transform:uppercase;
      font-size:11px;
    }
    .linkbtn.red{border-color:rgba(239,68,68,.5);color:var(--red);}
    .linkbtn.green{border-color:rgba(34,197,94,.5);color:var(--green);}
    .note{font-size:12px;color:var(--muted);margin-top:8px}
    .hidden{display:none !important}
  </style>
</head>

<body>
  <header>
    <h1>TESOURA - CAIXA</h1>
    <div style="font-size:12px;color:var(--muted);font-weight:900">(auto-save)</div>
  </header>

  <div class="wrap">

    <div class="panel">
      <h2>Filtro</h2>
      <div class="row">
        <div>
          <label>ANO:</label><br/>
          <select id="fAno" class="w-sm"></select>
        </div>

        <div>
          <label>MÊS:</label><br/>
          <select id="fMes" class="w-sm"></select>
        </div>

        <div>
          <label>PERÍODO:</label><br/>
          <select id="fPeriodo" class="w-md">
            <option value="SEMANAL">SEMANAL</option>
            <option value="MENSAL">MENSAL</option>
            <option value="ANUAL">ANUAL</option>
          </select>
        </div>

        <div id="boxSemana">
          <label>SEMANA:</label><br/>
          <select id="fSemana" class="w-lg"></select>
        </div>

        <button id="btnConsultar" class="btn btn-blue">CONSULTAR</button>
        <button id="btnPDF" class="btn btn-orange">BAIXAR PDF</button>
      </div>

      <div class="status" id="statusFiltro"></div>
      <div class="totais" id="totais"></div>
      <div class="note">
        Regra: a visão semanal é <b>segunda → segunda</b>. O saldo é <b>acumulativo</b> (não zera).
      </div>
    </div>

    <div class="panel">
      <h2>Lançamentos</h2>

      <div class="row" style="margin-bottom:10px;">
        <div>
          <label>DATA:</label><br/>
          <input id="iData" type="date" class="w-md"/>
        </div>

        <div>
          <label>TIPO:</label><br/>
          <select id="iTipo" class="w-md">
            <option value="RECEITA">RECEITA</option>
            <option value="DESPESA">DESPESA</option>
          </select>
        </div>

        <div>
          <label>DESCRIÇÃO:</label><br/>
          <input id="iDescricao" type="text" class="w-lg" placeholder="Ex: bola, arbitragem, doação..."/>
        </div>

        <div>
          <label>OBS:</label><br/>
          <input id="iObs" type="text" class="w-obs" placeholder="Opcional"/>
        </div>

        <div>
          <label>VALOR (R$):</label><br/>
          <input id="iValor" type="number" class="w-sm" step="0.01" min="0"/>
        </div>

        <button id="btnSalvar" class="btn btn-blue">SALVAR</button>
        <button id="btnCancelarEdicao" class="btn btn-dark hidden">CANCELAR</button>
      </div>

      <div class="table-wrap">
        <table id="tbl">
          <thead>
            <tr>
              <th style="width:110px;">DATA</th>
              <th style="width:95px;">TIPO</th>
              <th>DESCRIÇÃO</th>
              <th style="width:160px;">OBS</th>
              <th style="width:130px;">RECEITA (R$)</th>
              <th style="width:130px;">DESPESA (R$)</th>
              <th style="width:130px;">SALDO (R$)</th>
              <th style="width:150px;">AÇÕES</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr><td colspan="8" class="muted">Carregando...</td></tr>
          </tbody>
        </table>
      </div>

      <div class="note">
        * Mensalidades aparecem aqui apenas para <b>visualização</b> (não editáveis neste painel).
      </div>
    </div>

  </div>

<script>
/* =========================================================
   IMPORTANTE: cole aqui as suas credenciais (as mesmas dos outros painéis)
   ========================================================= */
const SUPABASE_URL = "https://xuplzpispukvtggjasxx.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh1cGx6cGlzcHVrdnRnZ2phc3h4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5NTI2MjcsImV4cCI6MjA4MDUyODYyN30.aae__P90u3KM1Rr_ESJpJ4JigLnmCmJnhUsyxNA54pw";

/* =========================================================
   CLIENT
   ========================================================= */
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

/* =========================================================
   UTIL
   ========================================================= */
const pad2 = (n)=> String(n).padStart(2,'0');
const money = (v)=> (Number(v||0)).toLocaleString('pt-BR', {style:'currency', currency:'BRL'});
const ymd = (d)=> {
  const dt = new Date(d);
  const y = dt.getFullYear();
  const m = pad2(dt.getMonth()+1);
  const day = pad2(dt.getDate());
  return `${y}-${m}-${day}`;
};
const br = (ymdStr)=> {
  if(!ymdStr) return "";
  const [y,m,d] = ymdStr.split("-");
  return `${d}/${m}/${y}`;
};
function addDays(dateStr, days){
  const d = new Date(dateStr+"T00:00:00");
  d.setDate(d.getDate()+days);
  return ymd(d);
}
function startOfWeekMonday(dateStr){
  const d = new Date(dateStr+"T00:00:00");
  const day = d.getDay(); // 0 dom, 1 seg...
  const diff = (day===0? -6 : 1-day); // volta até segunda
  d.setDate(d.getDate()+diff);
  return ymd(d);
}

/* =========================================================
   STATE
   ========================================================= */
let editingId = null;
let cache = { rows: [], mensalidades: [] };

/* =========================================================
   FILTROS UI
   ========================================================= */
const fAno = document.getElementById("fAno");
const fMes = document.getElementById("fMes");
const fPeriodo = document.getElementById("fPeriodo");
const fSemana = document.getElementById("fSemana");
const boxSemana = document.getElementById("boxSemana");
const statusFiltro = document.getElementById("statusFiltro");
const totaisEl = document.getElementById("totais");

const btnConsultar = document.getElementById("btnConsultar");
const btnPDF = document.getElementById("btnPDF");

const iData = document.getElementById("iData");
const iTipo = document.getElementById("iTipo");
const iDescricao = document.getElementById("iDescricao");
const iObs = document.getElementById("iObs");
const iValor = document.getElementById("iValor");
const btnSalvar = document.getElementById("btnSalvar");
const btnCancelarEdicao = document.getElementById("btnCancelarEdicao");

function buildAnoMes(){
  const now = new Date();
  const anoAtual = now.getFullYear();
  // ANO
  fAno.innerHTML = "";
  for(let a = anoAtual-1; a<=anoAtual+1; a++){
    const opt = document.createElement("option");
    opt.value = String(a);
    opt.textContent = String(a);
    if(a===anoAtual) opt.selected = true;
    fAno.appendChild(opt);
  }
  // MÊS
  const meses = ["01 - JAN","02 - FEV","03 - MAR","04 - ABR","05 - MAI","06 - JUN","07 - JUL","08 - AGO","09 - SET","10 - OUT","11 - NOV","12 - DEZ"];
  fMes.innerHTML = "";
  meses.forEach((txt, idx)=>{
    const mm = pad2(idx+1);
    const opt = document.createElement("option");
    opt.value = mm;
    opt.textContent = txt;
    if(idx===now.getMonth()) opt.selected = true;
    fMes.appendChild(opt);
  });
}

function buildSemanas(){
  // gera últimas 14 semanas baseadas na data de hoje
  const hoje = ymd(new Date());
  const monday = startOfWeekMonday(hoje);
  fSemana.innerHTML = "";
  for(let i=0;i<14;i++){
    const ini = addDays(monday, -7*i);
    const fim = addDays(ini, 7); // segunda -> próxima segunda
    const opt = document.createElement("option");
    opt.value = `${ini}|${fim}`;
    opt.textContent = `${br(ini)} → ${br(fim)}`;
    if(i===0) opt.selected = true;
    fSemana.appendChild(opt);
  }
}

function getRange(){
  const ano = fAno.value;
  const mes = fMes.value;
  const periodo = fPeriodo.value;

  if(periodo==="ANUAL"){
    const ini = `${ano}-01-01`;
    const fim = `${ano}-12-31`;
    return {periodo, ini, fim, label:`Ano ${ano}`};
  }

  if(periodo==="MENSAL"){
    const ini = `${ano}-${mes}-01`;
    const fim = addDays(addDays(ini, 32).slice(0,7)+"-01", -1); // último dia do mês
    return {periodo, ini, fim, label:`Mês ${mes}/${ano}`};
  }

  // SEMANAL
  const parts = (fSemana.value || "").split("|");
  const ini = parts[0];
  const fim = parts[1];
  return {periodo, ini, fim, label:`Semana ${br(ini)} → ${br(fim)}`};
}

function syncSemanaVisibility(){
  const p = fPeriodo.value;
  boxSemana.classList.toggle("hidden", p!=="SEMANAL");
}

/* =========================================================
   DATA ACCESS
   Tabela CAIXA: usamos SOMENTE colunas seguras (evita 400 por schema)
   - id (PK)
   - data (date)
   - descricao (text)
   - obs (text)
   - valor (numeric) -> positivo receita, negativo despesa
   ========================================================= */
async function listCaixa(ini, fim){
  const { data, error } = await sb
    .from("caixa")
    .select("id,data,descricao,obs,valor,created_at")
    .gte("data", ini)
    .lte("data", fim)
    .order("data", { ascending: true })
    .order("id", { ascending: true });

  if(error) throw error;
  return data || [];
}

async function sumCaixaBefore(ini){
  const { data, error } = await sb
    .from("caixa")
    .select("valor")
    .lt("data", ini);
  if(error) throw error;
  let s = 0;
  for(const r of (data||[])) s += Number(r.valor||0);
  return s;
}

async function listMensalidadesPagas(ini, fim){
  const { data, error } = await sb
    .from("mensalidades")
    .select("id,apelido,mes,ano,valor,pago,data_pagamento")
    .eq("pago", true);

  if(error) throw error;

  const out = [];
  for(const m of (data||[])){
    if(!m.data_pagamento) continue;
    const dp = ymd(m.data_pagamento);
    if(dp < ini || dp > fim) continue;
    const mm = pad2(Number(m.mes||0));
    const aa = String(m.ano||"");
    out.push({
      _kind: "mensalidade",
      id: m.id,
      data: dp,
      descricao: `Mensalidade - ${m.apelido} (${mm}/${aa})`,
      obs: "",
      valor: Number(m.valor||0)
    });
  }
  out.sort((a,b)=> (a.data===b.data ? String(a.id).localeCompare(String(b.id)) : (a.data<b.data ? -1 : 1)));
  return out;
}

async function insertCaixa(payload){
  const { error } = await sb.from("caixa").insert(payload);
  if(error) throw error;
}

async function updateCaixa(id, payload){
  const { error } = await sb.from("caixa").update(payload).eq("id", id);
  if(error) throw error;
}

async function deleteCaixa(id){
  const { error } = await sb.from("caixa").delete().eq("id", id);
  if(error) throw error;
}

/* =========================================================
   RENDER
   ========================================================= */
function renderTable(allRows, saldoAnterior){
  const tb = document.getElementById("tbody");
  tb.innerHTML = "";

  let saldo = Number(saldoAnterior||0);

  if(allRows.length===0){
    const tr = document.createElement("tr");
    tr.innerHTML = `<td colspan="8" class="muted">Sem registros no período.</td>`;
    tb.appendChild(tr);
    return;
  }

  for(const r of allRows){
    const isMensalidade = r._kind==="mensalidade";
    const v = Number(r.valor||0);
    const tipo = v>=0 ? "RECEITA" : "DESPESA";
    const receita = v>=0 ? v : 0;
    const despesa = v<0 ? Math.abs(v) : 0;
    saldo += v;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td title="${r.data||""}">${br(r.data)}</td>
      <td>${tipo==="RECEITA" ? `<span class="pill pill-rec">RECEITA</span>` : `<span class="pill pill-desp">DESPESA</span>`}</td>
      <td title="${(r.descricao||"").replaceAll('"','&quot;')}">${r.descricao||""}</td>
      <td title="${(r.obs||"").replaceAll('"','&quot;')}">${r.obs||""}</td>
      <td class="${receita>0?'money-pos':'muted'}">${receita>0?money(receita):""}</td>
      <td class="${despesa>0?'money-neg':'muted'}">${despesa>0?money(despesa):""}</td>
      <td><b>${money(saldo)}</b></td>
      <td>
        ${
          isMensalidade
          ? `<span class="muted" style="font-weight:900;">BLOQUEADO</span>`
          : `<div class="actions">
              <button class="linkbtn green" data-edit="${r.id}">EDITAR</button>
              <button class="linkbtn red" data-del="${r.id}">EXCLUIR</button>
            </div>`
        }
      </td>
    `;
    tb.appendChild(tr);
  }

  tb.querySelectorAll("[data-edit]").forEach(btn=>{
    btn.addEventListener("click", ()=> startEdit(Number(btn.getAttribute("data-edit"))));
  });
  tb.querySelectorAll("[data-del]").forEach(btn=>{
    btn.addEventListener("click", ()=> doDelete(Number(btn.getAttribute("data-del"))));
  });
}

function renderTotais(info){
  statusFiltro.textContent = info.status || "";
  totaisEl.innerHTML = `
    <span>LISTA CARREGADA.</span>
    <b> Registros:</b> ${info.qtd}
    &nbsp;&nbsp; | &nbsp;&nbsp;
    <b>Saldo anterior:</b> ${money(info.saldoAnterior)}
    &nbsp;&nbsp; | &nbsp;&nbsp;
    <b>Saldo no período:</b> ${money(info.saldoPeriodo)}
    &nbsp;&nbsp; | &nbsp;&nbsp;
    <b>Saldo final:</b> ${money(info.saldoFinal)}
  `;
}

/* =========================================================
   LOAD
   ========================================================= */
async function carregar(){
  try{
    const {ini, fim, label} = getRange();
    statusFiltro.textContent = `Carregando... (${label})`;
    totaisEl.textContent = "";

    const saldoAnterior = await sumCaixaBefore(ini);

    const [rowsCaixa, rowsMens] = await Promise.all([
      listCaixa(ini, fim),
      listMensalidadesPagas(ini, fim)
    ]);

    const cx = (rowsCaixa||[]).map(r=>({
      _kind:"caixa",
      id:r.id,
      data: ymd(r.data),
      descricao: r.descricao || "",
      obs: r.obs || "",
      valor: Number(r.valor||0)
    }));

    const all = cx.concat(rowsMens||[]).sort((a,b)=>{
      if(a.data===b.data){
        return String(a.id).localeCompare(String(b.id));
      }
      return a.data < b.data ? -1 : 1;
    });

    cache.rows = cx;
    cache.mensalidades = rowsMens||[];

    let saldo = Number(saldoAnterior||0);
    let saldoPeriodo = 0;
    for(const r of all){
      saldo += Number(r.valor||0);
      saldoPeriodo += Number(r.valor||0);
    }

    renderTotais({
      status: `Período: ${label}`,
      qtd: all.length,
      saldoAnterior,
      saldoPeriodo,
      saldoFinal: saldo
    });

    renderTable(all, saldoAnterior);
  }catch(err){
    console.error(err);
    statusFiltro.textContent = "ERRO ao buscar CAIXA (ver console).";
    totaisEl.textContent = "";
    const tb = document.getElementById("tbody");
    tb.innerHTML = `<tr><td colspan="8" class="money-neg">ERRO: ${err?.message || err}</td></tr>`;
    alert("ERRO ao carregar. Abra o console (F12) e me mande a mensagem em vermelho.");
  }
}

/* =========================================================
   EDIT / SAVE / DELETE
   ========================================================= */
function resetForm(){
  editingId = null;
  btnCancelarEdicao.classList.add("hidden");
  iData.value = ymd(new Date());
  iTipo.value = "RECEITA";
  iDescricao.value = "";
  iObs.value = "";
  iValor.value = "";
  btnSalvar.textContent = "SALVAR";
}

function startEdit(id){
  const r = cache.rows.find(x=>x.id===id);
  if(!r) return;
  editingId = id;
  btnCancelarEdicao.classList.remove("hidden");
  btnSalvar.textContent = "ATUALIZAR";

  iData.value = r.data;
  iTipo.value = (Number(r.valor)>=0) ? "RECEITA" : "DESPESA";
  iDescricao.value = r.descricao || "";
  iObs.value = r.obs || "";
  iValor.value = Math.abs(Number(r.valor||0)).toFixed(2);
  window.scrollTo({top:0, behavior:"smooth"});
}

async function doDelete(id){
  const r = cache.rows.find(x=>x.id===id);
  if(!r) return;
  if(!confirm("Excluir este lançamento?")) return;
  try{
    await deleteCaixa(id);
    await carregar();
  }catch(err){
    console.error(err);
    alert("ERRO ao excluir (ver console).");
  }
}

async function doSave(){
  const data = iData.value;
  const tipo = iTipo.value;
  const descricao = (iDescricao.value||"").trim();
  const obs = (iObs.value||"").trim();
  const valorAbs = Number(iValor.value||0);

  if(!data){ alert("Preencha a DATA."); return; }
  if(!descricao){ alert("Preencha a DESCRIÇÃO."); return; }
  if(!(valorAbs>0)){ alert("Preencha o VALOR (maior que 0)."); return; }

  const valor = (tipo==="DESPESA") ? -Math.abs(valorAbs) : Math.abs(valorAbs);

  try{
    if(editingId){
      await updateCaixa(editingId, { data, descricao, obs, valor });
    }else{
      await insertCaixa({ data, descricao, obs, valor });
    }
    resetForm();
    await carregar();
  }catch(err){
    console.error(err);
    alert("ERRO ao salvar (ver console).");
  }
}

/* =========================================================
   PDF (imprime o período selecionado sem cortar colunas)
   ========================================================= */
function buildPrintHTML(){
  const {label} = getRange();
  const rows = document.querySelectorAll("#tbody tr");

  const thead = document.querySelector("#tbl thead").cloneNode(true);
  thead.querySelector("tr").removeChild(thead.querySelectorAll("th")[7]); // remove AÇÕES

  const tbody = document.createElement("tbody");
  rows.forEach(tr=>{
    const tds = tr.querySelectorAll("td");
    if(tds.length<8) return;
    const tr2 = document.createElement("tr");
    for(let i=0;i<7;i++){
      const td = document.createElement("td");
      td.innerHTML = tds[i].innerHTML;
      tr2.appendChild(td);
    }
    tbody.appendChild(tr2);
  });

  const table = document.createElement("table");
  table.appendChild(thead);
  table.appendChild(tbody);

  return `
<!DOCTYPE html><html lang="pt-BR"><head><meta charset="utf-8"/>
<title>TESOURA - CAIXA</title>
<style>
  @page{ size: landscape; margin: 10mm; }
  body{font-family:Arial, sans-serif; color:#111; }
  h1{margin:0 0 6px 0; font-size:16px; text-transform:uppercase;}
  .meta{font-size:12px; margin-bottom:10px;}
  table{border-collapse:collapse; width:100%; table-layout:fixed;}
  th,td{border:1px solid #ddd; padding:6px; font-size:11px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
  th{background:#ff7f27; color:#111; text-transform:uppercase; letter-spacing:.3px;}
  .money-pos{color:#0a7a2a; font-weight:900;}
  .money-neg{color:#b91c1c; font-weight:900;}
</style>
</head><body>
  <h1>TESOURA - CAIXA</h1>
  <div class="meta">${label}<br/>${document.getElementById("totais").innerText}</div>
  ${table.outerHTML}
  <script>window.onload=()=>{window.print();};</script>
</body></html>`;
}

function baixarPDF(){
  const w = window.open("", "_blank");
  w.document.open();
  w.document.write(buildPrintHTML());
  w.document.close();
}

/* =========================================================
   INIT
   ========================================================= */
buildAnoMes();
buildSemanas();
syncSemanaVisibility();
resetForm();

fPeriodo.addEventListener("change", syncSemanaVisibility);
btnConsultar.addEventListener("click", carregar);
btnPDF.addEventListener("click", baixarPDF);
btnSalvar.addEventListener("click", doSave);
btnCancelarEdicao.addEventListener("click", resetForm);

window.addEventListener("load", carregar);
</script>

</body>
</html>
